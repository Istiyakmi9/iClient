<div class="col-md-12 col-sm-12 icard">
  <div class="x_panel">
    <div class="x_title">
      <h2>Manage Timetable <small>Add or change school timetable.</small></h2>
      <div class="clearfix"></div>
    </div>
    <div class="x_content">
      <!-- Smart Wizard -->
      <p>Use this page for only teaching & non-teaching staff registration. It will take all necessary information.
      </p>
      <div [formGroup]="PeriodSections" class="col-md-12 setting card p-0 m-0">
        <div class="card-header">
          Application level setting.
        </div>
        <div class="card-body">
          <ngb-tabset [justify]="currentJustify">
            <ngb-tab title="Timetable">
              <ng-template ngbTabContent>
                <div class="mt-4">
                  <div class="col-md-12 col-sm-12 d-md-flex p-0">
                    <div class="x_panel pb-0">
                      <div class="x_title">
                        <h2 class="StepTitle">School Timetable<small>Define school period and timetable.</small></h2>
                        <div class="clearfix"></div>
                      </div>
                      <div class="section-card">
                        <div class="col-12 row p-0 m-0">
                          <div class="col-3 form-group">
                            <label for="total-period">School start time</label>
                            <div>
                              <app-bh-timepicker formControlName="SchoolStartTime">
                              </app-bh-timepicker>
                            </div>
                          </div>

                          <div class="col-3 form-group">
                            <label for="total-period">Total no.# of periods</label>
                            <div>
                              <select class="form-control" [disabled]="EnablePeriods" formControlName="TotalPeriods"
                                (change)="BuildPeriods()">
                                <option value="">No.# of Perods</option>
                                <option *ngFor="let p of PeriodsCounts" [value]="p">{{p}}</option>
                              </select> 
                            </div>
                          </div>

                          <div class="col-3 form-group">
                            <label for="total-period">Lunch after period</label>
                            <div>
                              <select class="form-control" [disabled]="EnableSlots"
                                formControlName="LunchAfterPeriod">
                                <option value="">Select Perods.#</option>
                                <option *ngFor="let p of ActualPeriods" [value]="p">{{p}}</option>
                              </select>
                            </div>
                          </div>

                          <div class="col-3 form-group">
                            <label for="total-period">Period Duration (in HH:MM)</label>
                            <div>
                              <app-bh-timepicker formControlName="PeriodsDuration">
                              </app-bh-timepicker>
                            </div>
                          </div>
                        </div>

                        <div class="col-12 row p-0 m-0">
                          <div class="col-12 text-right mb-4">
                            <button class="btn btn-outline-dark mr-2">
                              <i class="fas fa-undo-alt"></i>
                              Reset
                            </button>
                            <button class="btn btn-primary" (click)="GenerateNextPeriods()">
                              <i class="fas fa-wrench pr-1"></i>
                              Generate
                            </button>
                          </div>
                        </div>

                      </div>
                      <div class="section-card">
                        <div class="col-12 row" formArrayName="Timing">
                          <<ng-container *ngIf="Timing.controls.length > 0">
                            <div class="col-3 mt-2" *ngFor="let el of Timing.controls; let i = index" [formGroupName]="i">
                              <div class="card">
                                <div class="card-header card-header-padding">
                                  <label class="m-0">{{el.get('SufixedNumber').value}}</label>
                                </div>
                                <div class="col-12 card-body">
                                  <label>
                                    <span class="pr-1">Time:</span>
                                    {{el.get('MeridianTime').value}}
                                  </label>
                                  <div>
                                    <span class="pr-1">
                                      <b>Duration: </b>
                                    </span>
                                    <span class="pr-2">{{el.get('DurationInHrs').value}} Hrs</span>
                                    <span>{{el.get('DurationInMin').value}} Mins</span>
                                  </div>
                                  <div>
                                    <app-bh-timepicker [value]="el.get('StandardTime').value" formControlName="DurationInHrs">
                                    </app-bh-timepicker>
                                    <input type="hidden" formControlName="DurationInMin">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </ng-container>
                        </div>
                        <div class="col-12 text-right mb-4">
                          <button class="btn btn-outline-dark mr-2">
                            <i class="fas fa-undo-alt"></i>
                            Reset
                          </button>
                          <button class="btn btn-warning" (click)="SaveSetting()">
                            <i class="fas fa-save"></i>
                            Save
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </ngb-tab>
            <ngb-tab>
              <ng-template ngbTabTitle>Timings (Periods)</ng-template>
              <ng-template ngbTabContent>
                <div class="mt-5">
                  <div class="col-md-12 col-sm-12 d-md-flex p-0">
                    <div class="x_panel pb-0">
                      <div class="x_title">
                        <h2 class="StepTitle">Contact information<small>Personal information.</small></h2>
                        <div class="clearfix"></div>
                      </div>

                    </div>
                  </div>
                </div>
              </ng-template>
            </ngb-tab>
            <ngb-tab title="A very long nav title">
              <ng-template ngbTabContent class="mb-2">
                <p>Sed commodo, leo at suscipit dictum, quam est porttitor sapien, eget sodales nibh elit id diam. Nulla
                  facilisi. Donec egestas ligula vitae odio interdum aliquet. Duis lectus turpis, luctus eget tincidunt
                  eu, congue et odio. Duis pharetra et nisl at faucibus. Quisque luctus pulvinar arcu, et molestie
                  lectus
                  ultrices et. Sed diam urna, egestas ut ipsum vel, volutpat volutpat neque. Praesent fringilla tortor
                  arcu. Vivamus faucibus nisl enim, nec tristique ipsum euismod facilisis. Morbi ut bibendum est, eu
                  tincidunt odio. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.
                  Mauris aliquet odio ac lorem aliquet ultricies in eget neque. Phasellus nec tortor vel tellus pulvinar
                  feugiat.</p>
              </ng-template>
            </ngb-tab>
          </ngb-tabset>
        </div>
      </div>
    </div>
  </div>
</div>
